/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,drupalSettings){Drupal.AjaxCommands.prototype.viewsShowMore=function(ajax,response){const selector=response.selector||ajax.wrapper;const $wrapper=$(selector);const method=response.method||ajax.method;const appendAt=response.append_at||'';const effect=ajax.getEffect(response);const settings=response.settings||ajax.settings||drupalSettings;const currentViewId=selector.replace('.js-view-dom-id-','views_dom_id:');const focusable=['input:not([type="hidden"]):not([disabled])','select:not([disabled])','textarea:not([disabled])','a[href]','button:not([disabled])','[tabindex]:not(slot)','audio[controls]','video[controls]','[contenteditable]:not([contenteditable="false"])','details>summary:first-of-type','details'].join(',');let $newContent=$($.parseHTML(response.data,document,true));if($newContent.length){$newContent=Drupal.theme('ajaxWrapperNewContent',$newContent,ajax,response);const view=Drupal.views.instances[currentViewId];Drupal.detachBehaviors($wrapper.get(0),settings);once.remove('ajax-pager',view.$view);once.remove('exposed-form',view.$exposed_form);const headerSelector=response.options.header_selector;if(headerSelector&&settings.header)$(headerSelector).html(settings.header);const footerSelector=response.options.footer_selector;if(footerSelector&&settings.footer)$(footerSelector).html(settings.footer);const contentSelector=appendAt&&!response.options.content_selector?`.view-content ${appendAt}`:response.options.content_selector||'.view-content';const pagerSelector=response.options.pager_selector||'.pager-show-more';const $firstNewItem=$newContent.find(contentSelector).children().first();if(effect.showEffect!=='show'&&effect.showEffect!=='scrollToggle')$newContent.find(contentSelector).children().hide();const $contentArea=$wrapper.find(contentSelector);if(effect.showEffect==='scroll_fadeToggle'||effect.showEffect==='scrollToggle'){const oldHeight=$contentArea.addClass('clearfix').height();const oldItems=$contentArea.children().length;const newItems=$newContent.find(contentSelector).children().length;const newHeight=oldHeight+Math.ceil((oldHeight/oldItems)*newItems);if(effect.showEffect==='scroll_fadeToggle')$contentArea.height(newHeight);const positionTop=$contentArea.offset().top+oldHeight-response.scroll_offset;$('html, body').animate({scrollTop:positionTop},effect.showSpeed);}$wrapper.find(pagerSelector).replaceWith($newContent.find(pagerSelector));$contentArea[method]($newContent.find(contentSelector).children());if(effect.showEffect!=='show'&&effect.showEffect!=='scrollToggle'){if(effect.showEffect==='scroll_fadeToggle')effect.showEffect='fadeIn';$contentArea.children(':not(:visible)')[effect.showEffect](effect.showSpeed);$contentArea.queue(function(next){$(this).css('height','auto');next();});}if($firstNewItem.find(focusable).length)$firstNewItem.find(focusable).first().focus();else $firstNewItem.attr('tabindex','0').focus();$wrapper.trigger('viewsShowMore.newContent',$newContent.clone());Drupal.attachBehaviors($wrapper.get(0),settings);}};})(jQuery,Drupal,drupalSettings);;
